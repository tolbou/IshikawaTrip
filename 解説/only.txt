このコード resources :posts, only: %i[index] は、Railsのルーティング設定で使用されるもので、posts リソースに対するルーティングを定義していますが、その中で index アクションのみを生成するように限定しています。

詳細解説
resources :posts は通常、7つの標準的なRESTfulルート（index, show, new, create, edit, update, destroy）を生成します。これらは、一般的にリソースのCRUD（Create, Read, Update, Delete）操作に対応しています。

only: %i[index] という部分は、このルート設定が index アクションに限定されることを指定しています。つまり、posts リソースのうち、index アクションに対応するルートのみを作成します。これにより、GET /posts のURLで投稿の一覧を表示するページにアクセスできるようになりますが、他のアクション（show, new, create など）に対するルートは生成されません。

なぜこのように設定するのか？
このような設定が行われる理由は、アプリケーションの特定の部分のみを公開したい場合や、他のアクションが不要な場合に、ルーティングをシンプルに保ち、不必要なエンドポイントを公開しないようにするためです。これにより、セキュリティを向上させるとともに、アプリケーションの管理を容易にすることができます。

この設定は、たとえば、ユーザーに対して投稿の一覧だけを表示し、他のCRUD操作は管理者権限でのみ行うような場合に便利です。